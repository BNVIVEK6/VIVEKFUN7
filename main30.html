<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MADARA UCHIHA - Professional Prediction System</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --danger-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            --dark-gradient: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        }
        
        .gradient-primary { background: var(--primary-gradient); }
        .gradient-secondary { background: var(--secondary-gradient); }
        .gradient-success { background: var(--success-gradient); }
        .gradient-danger { background: var(--danger-gradient); }
        .gradient-dark { background: var(--dark-gradient); }
        
        .glass-morphism {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .dark .glass-morphism {
            background: rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .prediction-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
        }
        
        .prediction-card:hover {
            transform: translateY(-10px) rotateX(5deg);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        }
        
        .pulse-ring {
            animation: pulse-ring 2s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite;
        }
        
        @keyframes pulse-ring {
            0% { transform: scale(0.33); }
            40%, 50% { opacity: 1; }
            100% { opacity: 0; transform: scale(1.2); }
        }
        
        .floating-animation {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        .shimmer {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        .glow-effect {
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.6);
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 20px rgba(102, 126, 234, 0.6); }
            to { box-shadow: 0 0 30px rgba(102, 126, 234, 0.8); }
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .notification {
            transform: translateX(100%);
            transition: transform 0.3s ease-in-out;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .algorithm-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .algorithm-card:hover {
            transform: scale(1.05);
        }
        
        .algorithm-card.selected {
            background: var(--primary-gradient);
            color: white;
            transform: scale(1.1);
        }
        
        .timer-circle {
            stroke-dasharray: 283;
            stroke-dashoffset: 283;
            transition: stroke-dashoffset 1s linear;
        }
        
        .number-display {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            background-size: 400% 400%;
            animation: gradientShift 3s ease infinite;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .win-indicator {
            background: linear-gradient(45deg, #00b894, #00a085);
        }
        
        .loss-indicator {
            background: linear-gradient(45deg, #e17055, #d63031);
        }
        
        .pending-indicator {
            background: linear-gradient(45deg, #fdcb6e, #e17055);
        }
    </style>
</head>
<body class="min-h-screen bg-gray-100 dark:bg-gray-900 transition-all duration-300">
    <!-- Header -->
    <header class="gradient-primary text-white shadow-2xl">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center space-x-4">
                    <div class="w-12 h-12 rounded-full gradient-secondary flex items-center justify-center">
                        <i class="fas fa-eye text-2xl text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold">MADARA UCHIHA</h1>
                        <p class="text-sm opacity-80">Professional Prediction System</p>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <!-- Live Status -->
                    <div class="flex items-center space-x-2 glass-morphism px-3 py-2 rounded-lg">
                        <div class="w-3 h-3 bg-green-400 rounded-full pulse-ring"></div>
                        <span class="text-sm font-medium">LIVE</span>
                    </div>
                    
                    <!-- Controls -->
                    <button id="themeToggle" class="glass-morphism p-3 rounded-lg hover:bg-white hover:bg-opacity-20 transition-all">
                        <i class="fas fa-moon text-lg"></i>
                    </button>
                    <button id="soundToggle" class="glass-morphism p-3 rounded-lg hover:bg-white hover:bg-opacity-20 transition-all">
                        <i class="fas fa-volume-up text-lg"></i>
                    </button>
                    <button id="fullscreenToggle" class="glass-morphism p-3 rounded-lg hover:bg-white hover:bg-opacity-20 transition-all">
                        <i class="fas fa-expand text-lg"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="bg-white dark:bg-gray-800 shadow-lg sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex space-x-8">
                <button class="tab-btn py-4 px-6 border-b-3 border-blue-500 text-blue-600 font-semibold flex items-center space-x-2" data-tab="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </button>
                <button class="tab-btn py-4 px-6 border-b-3 border-transparent text-gray-500 hover:text-gray-700 font-semibold flex items-center space-x-2" data-tab="results">
                    <i class="fas fa-chart-bar"></i>
                    <span>Win/Loss</span>
                </button>
                <button class="tab-btn py-4 px-6 border-b-3 border-transparent text-gray-500 hover:text-gray-700 font-semibold flex items-center space-x-2" data-tab="recent">
                    <i class="fas fa-history"></i>
                    <span>Recent Results</span>
                </button>
                <button class="tab-btn py-4 px-6 border-b-3 border-transparent text-gray-500 hover:text-gray-700 font-semibold flex items-center space-x-2" data-tab="analytics">
                    <i class="fas fa-chart-line"></i>
                    <span>Analytics</span>
                </button>
                <button class="tab-btn py-4 px-6 border-b-3 border-transparent text-gray-500 hover:text-gray-700 font-semibold flex items-center space-x-2" data-tab="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <!-- Current Prediction Section -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
                <!-- Main Prediction Card -->
                <div class="lg:col-span-2">
                    <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8 prediction-card glow-effect">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Current Prediction</h2>
                            <div class="flex items-center space-x-3">
                                <!-- Timer Circle -->
                                <div class="relative w-16 h-16">
                                    <svg class="w-16 h-16 transform -rotate-90" viewBox="0 0 100 100">
                                        <circle cx="50" cy="50" r="45" stroke="currentColor" stroke-width="4" fill="none" class="text-gray-200 dark:text-gray-700"/>
                                        <circle id="timerCircle" cx="50" cy="50" r="45" stroke="currentColor" stroke-width="4" fill="none" class="text-blue-500 timer-circle" stroke-linecap="round"/>
                                    </svg>
                                    <div class="absolute inset-0 flex items-center justify-center">
                                        <span id="timerDisplay" class="text-sm font-bold text-gray-700 dark:text-gray-300">30</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="text-center mb-8">
                            <div class="mb-4">
                                <p class="text-sm text-gray-500 dark:text-gray-400 mb-2">Period Number</p>
                                <p id="currentPeriod" class="text-3xl font-bold text-gray-900 dark:text-white">-----</p>
                            </div>
                            
                            <div class="mb-6">
                                <p class="text-sm text-gray-500 dark:text-gray-400 mb-4">Prediction</p>
                                <div id="predictionDisplay" class="mx-auto w-32 h-32 rounded-full flex items-center justify-center text-white font-bold text-2xl number-display floating-animation">
                                    <span id="currentPrediction">--</span>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div class="text-center">
                                    <p class="text-sm text-gray-500 dark:text-gray-400">Confidence</p>
                                    <p id="confidenceLevel" class="text-xl font-bold text-blue-600">--</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-sm text-gray-500 dark:text-gray-400">Algorithm</p>
                                    <p id="currentAlgorithm" class="text-sm font-medium text-purple-600">Neural Network</p>
                                </div>
                            </div>
                        </div>
                        
                        <button id="refreshBtn" class="w-full gradient-primary text-white py-3 px-6 rounded-xl font-semibold hover:scale-105 transition-all duration-300">
                            <i class="fas fa-sync-alt mr-2"></i>
                            Refresh Prediction
                        </button>
                    </div>
                </div>
                
                <!-- Stats Cards -->
                <div class="space-y-6">
                    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 prediction-card">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Win Rate</p>
                                <p id="winRate" class="text-3xl font-bold text-green-600">0%</p>
                            </div>
                            <div class="w-12 h-12 gradient-success rounded-full flex items-center justify-center">
                                <i class="fas fa-trophy text-white text-xl"></i>
                            </div>
                        </div>
                        <div class="mt-4">
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="winRateBar" class="bg-green-500 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 prediction-card">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Current Streak</p>
                                <p id="currentStreak" class="text-3xl font-bold text-orange-600">0</p>
                            </div>
                            <div class="w-12 h-12 gradient-danger rounded-full flex items-center justify-center">
                                <i class="fas fa-fire text-white text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 prediction-card">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Total Games</p>
                                <p id="totalGames" class="text-3xl font-bold text-purple-600">0</p>
                            </div>
                            <div class="w-12 h-12 gradient-secondary rounded-full flex items-center justify-center">
                                <i class="fas fa-gamepad text-white text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Algorithm Selection -->
            <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8 mb-8">
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-6">Prediction Algorithm</h3>
                <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                    <div class="algorithm-card glass-morphism p-6 rounded-2xl text-center selected" data-algorithm="neural">
                        <i class="fas fa-brain text-3xl text-purple-600 mb-3"></i>
                        <h4 class="font-semibold mb-2">Neural Network</h4>
                        <p class="text-xs text-gray-500">Advanced AI prediction</p>
                    </div>
                    <div class="algorithm-card glass-morphism p-6 rounded-2xl text-center" data-algorithm="pattern">
                        <i class="fas fa-chart-line text-3xl text-blue-600 mb-3"></i>
                        <h4 class="font-semibold mb-2">Pattern Analysis</h4>
                        <p class="text-xs text-gray-500">Historical patterns</p>
                    </div>
                    <div class="algorithm-card glass-morphism p-6 rounded-2xl text-center" data-algorithm="statistical">
                        <i class="fas fa-calculator text-3xl text-green-600 mb-3"></i>
                        <h4 class="font-semibold mb-2">Statistical Model</h4>
                        <p class="text-xs text-gray-500">Mathematical analysis</p>
                    </div>
                    <div class="algorithm-card glass-morphism p-6 rounded-2xl text-center" data-algorithm="probability">
                        <i class="fas fa-percentage text-3xl text-red-600 mb-3"></i>
                        <h4 class="font-semibold mb-2">Probability Engine</h4>
                        <p class="text-xs text-gray-500">Bayesian inference</p>
                    </div>
                    <div class="algorithm-card glass-morphism p-6 rounded-2xl text-center" data-algorithm="hybrid">
                        <i class="fas fa-cogs text-3xl text-yellow-600 mb-3"></i>
                        <h4 class="font-semibold mb-2">Hybrid System</h4>
                        <p class="text-xs text-gray-500">Combined algorithms</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Win/Loss Tab -->
        <div id="results" class="tab-content">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <!-- Win/Loss Overview -->
                <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8">
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-6">Performance Overview</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-4 rounded-xl win-indicator">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-check-circle text-white text-2xl"></i>
                                <span class="text-white font-semibold">Wins</span>
                            </div>
                            <span id="totalWins" class="text-white text-2xl font-bold">0</span>
                        </div>
                        
                        <div class="flex items-center justify-between p-4 rounded-xl loss-indicator">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-times-circle text-white text-2xl"></i>
                                <span class="text-white font-semibold">Losses</span>
                            </div>
                            <span id="totalLosses" class="text-white text-2xl font-bold">0</span>
                        </div>
                        
                        <div class="flex items-center justify-between p-4 rounded-xl pending-indicator">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-clock text-white text-2xl"></i>
                                <span class="text-white font-semibold">Pending</span>
                            </div>
                            <span id="totalPending" class="text-white text-2xl font-bold">0</span>
                        </div>
                    </div>
                </div>
                
                <!-- Recent Performance Chart -->
                <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8">
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-6">Recent Performance</h3>
                    <canvas id="performanceChart"></canvas>
                </div>
            </div>
            
            <!-- Detailed Results Table -->
            <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8">
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-6">Detailed Results</h3>
                <div class="overflow-x-auto">
                    <table class="min-w-full">
                        <thead>
                            <tr class="border-b border-gray-200 dark:border-gray-700">
                                <th class="text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-300">Period</th>
                                <th class="text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-300">Prediction</th>
                                <th class="text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-300">Result</th>
                                <th class="text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-300">Status</th>
                                <th class="text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-300">Time</th>
                            </tr>
                        </thead>
                        <tbody id="resultsTableBody" class="divide-y divide-gray-200 dark:divide-gray-700">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Recent Results Tab -->
        <div id="recent" class="tab-content">
            <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8 mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white">Last 10 Game Results</h3>
                    <button id="fetchResultsBtn" class="gradient-primary text-white px-6 py-3 rounded-xl font-semibold hover:scale-105 transition-all">
                        <i class="fas fa-refresh mr-2"></i>Fetch Latest
                    </button>
                </div>
                
                <!-- Visual Results Grid -->
                <div id="recentResultsGrid" class="grid grid-cols-5 md:grid-cols-10 gap-4 mb-8">
                    <!-- Results will be populated here -->
                </div>
                
                <!-- Results Table -->
                <div class="overflow-x-auto">
                    <table class="min-w-full">
                        <thead>
                            <tr class="border-b border-gray-200 dark:border-gray-700">
                                <th class="text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-300">Period</th>
                                <th class="text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-300">Number</th>
                                <th class="text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-300">Size</th>
                                <th class="text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-300">Color</th>
                                <th class="text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-300">Time</th>
                            </tr>
                        </thead>
                        <tbody id="recentResultsTable" class="divide-y divide-gray-200 dark:divide-gray-700">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Analytics Tab -->
        <div id="analytics" class="tab-content">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8">
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-6">Accuracy Trend</h3>
                    <canvas id="accuracyChart"></canvas>
                </div>
                
                <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8">
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-6">Prediction Distribution</h3>
                    <canvas id="distributionChart"></canvas>
                </div>
                
                <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8">
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-6">Algorithm Performance</h3>
                    <canvas id="algorithmChart"></canvas>
                </div>
                
                <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8">
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-6">Win Streak Analysis</h3>
                    <canvas id="streakChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Settings Tab -->
        <div id="settings" class="tab-content">
            <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8">
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-8">System Settings</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Appearance Settings -->
                    <div class="space-y-6">
                        <h4 class="text-lg font-semibold text-gray-700 dark:text-gray-300">Appearance</h4>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Theme</label>
                            <div class="flex space-x-4">
                                <button id="lightTheme" class="flex-1 p-4 rounded-xl border-2 border-gray-200 hover:border-blue-500 transition-all">
                                    <i class="fas fa-sun text-yellow-500 text-2xl mb-2"></i>
                                    <p class="font-medium">Light</p>
                                </button>
                                <button id="darkTheme" class="flex-1 p-4 rounded-xl border-2 border-gray-200 hover:border-blue-500 transition-all">
                                    <i class="fas fa-moon text-blue-500 text-2xl mb-2"></i>
                                    <p class="font-medium">Dark</p>
                                </button>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Animation Speed</label>
                            <select id="animationSpeed" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500">
                                <option value="slow">Slow</option>
                                <option value="normal" selected>Normal</option>
                                <option value="fast">Fast</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Audio Settings -->
                    <div class="space-y-6">
                        <h4 class="text-lg font-semibold text-gray-700 dark:text-gray-300">Audio & Notifications</h4>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Sound Effects</label>
                            <div class="flex items-center justify-between">
                                <span>Enable Sounds</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="enableSounds" class="sr-only peer" checked>
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                                </label>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Sound Volume</label>
                            <input type="range" id="soundVolume" min="0" max="100" value="50" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        </div>
                        
                        <div>
                            <button id="testSoundBtn" class="gradient-primary text-white px-6 py-3 rounded-xl font-semibold hover:scale-105 transition-all">
                                <i class="fas fa-volume-up mr-2"></i>Test Sound
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- System Settings -->
                <div class="mt-8 pt-8 border-t border-gray-200 dark:border-gray-700">
                    <h4 class="text-lg font-semibold text-gray-700 dark:text-gray-300 mb-6">System</h4>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Auto Refresh</label>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="autoRefresh" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Notifications</label>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="enableNotifications" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                        
                        <div>
                            <button id="clearDataBtn" class="gradient-danger text-white px-6 py-3 rounded-xl font-semibold hover:scale-105 transition-all">
                                <i class="fas fa-trash mr-2"></i>Clear Data
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Notification Container -->
    <div id="notificationContainer" class="fixed top-24 right-6 space-y-4 z-50">
    </div>

    <script>
        // Global Variables
        let gameData = {
            history: [],
            recentResults: [],
            currentPeriod: null,
            currentPrediction: null,
            algorithm: 'neural',
            stats: {
                wins: 0,
                losses: 0,
                pending: 0,
                total: 0,
                winRate: 0,
                currentStreak: 0,
                maxStreak: 0
            },
            settings: {
                theme: 'light',
                soundEnabled: true,
                soundVolume: 50,
                autoRefresh: true,
                notifications: true,
                animationSpeed: 'normal'
            }
        };

        // Timer variables
        let timer = 30;
        let timerInterval;
        let gameInterval;

        // Charts
        let charts = {};

        // Prediction Algorithms
        const algorithms = {
            neural: (history) => {
                if (history.length < 10) return { prediction: Math.random() > 0.5 ? 'BIG' : 'SMALL', confidence: 50 };
                
                // Advanced neural network simulation
                let patterns = [];
                for (let i = 0; i < history.length - 5; i++) {
                    patterns.push(history.slice(i, i + 5));
                }
                
                let weights = patterns.map(pattern => {
                    let bigCount = pattern.filter(n => n >= 5).length;
                    return bigCount / pattern.length;
                });
                
                let avgWeight = weights.reduce((a, b) => a + b, 0) / weights.length;
                let confidence = Math.round(Math.abs(avgWeight - 0.5) * 200);
                
                return {
                    prediction: avgWeight > 0.52 ? 'BIG' : 'SMALL',
                    confidence: Math.max(60, confidence)
                };
            },
            
            pattern: (history) => {
                if (history.length < 8) return { prediction: Math.random() > 0.5 ? 'BIG' : 'SMALL', confidence: 45 };
                
                // Pattern recognition algorithm
                let recent = history.slice(0, 8);
                let bigSequence = 0;
                let smallSequence = 0;
                
                for (let i = 0; i < recent.length; i++) {
                    if (recent[i] >= 5) {
                        bigSequence++;
                        smallSequence = 0;
                    } else {
                        smallSequence++;
                        bigSequence = 0;
                    }
                }
                
                let prediction = bigSequence > smallSequence ? 'SMALL' : 'BIG'; // Opposite pattern
                let confidence = Math.round(55 + Math.abs(bigSequence - smallSequence) * 5);
                
                return { prediction, confidence: Math.min(85, confidence) };
            },
            
            statistical: (history) => {
                if (history.length < 15) return { prediction: Math.random() > 0.5 ? 'BIG' : 'SMALL', confidence: 40 };
                
                // Statistical analysis
                let recent = history.slice(0, 15);
                let mean = recent.reduce((a, b) => a + b, 0) / recent.length;
                let variance = recent.reduce((acc, val) => acc + Math.pow(val - mean, 2), 0) / recent.length;
                let stdDev = Math.sqrt(variance);
                
                let lastValue = recent[0];
                let zScore = (lastValue - mean) / stdDev;
                
                let prediction = zScore > 0 ? 'SMALL' : 'BIG';
                let confidence = Math.round(50 + Math.abs(zScore) * 15);
                
                return { prediction, confidence: Math.min(90, confidence) };
            },
            
            probability: (history) => {
                if (history.length < 12) return { prediction: Math.random() > 0.5 ? 'BIG' : 'SMALL', confidence: 35 };
                
                // Bayesian probability calculation
                let recent = history.slice(0, 12);
                let bigCount = recent.filter(n => n >= 5).length;
                let smallCount = recent.length - bigCount;
                
                // Prior probability
                let priorBig = 0.5;
                let priorSmall = 0.5;
                
                // Likelihood
                let likelihoodBig = (bigCount + 1) / (recent.length + 2); // Laplace smoothing
                let likelihoodSmall = (smallCount + 1) / (recent.length + 2);
                
                // Posterior probability
                let posteriorBig = likelihoodBig * priorBig;
                let posteriorSmall = likelihoodSmall * priorSmall;
                
                let prediction = posteriorBig > posteriorSmall ? 'BIG' : 'SMALL';
                let confidence = Math.round(Math.abs(posteriorBig - posteriorSmall) * 200 + 40);
                
                return { prediction, confidence: Math.min(88, confidence) };
            },
            
            hybrid: (history) => {
                if (history.length < 10) return { prediction: Math.random() > 0.5 ? 'BIG' : 'SMALL', confidence: 30 };
                
                // Combine all algorithms
                let results = {
                    neural: algorithms.neural(history),
                    pattern: algorithms.pattern(history),
                    statistical: algorithms.statistical(history),
                    probability: algorithms.probability(history)
                };
                
                let bigVotes = 0;
                let smallVotes = 0;
                let totalConfidence = 0;
                
                Object.values(results).forEach(result => {
                    if (result.prediction === 'BIG') bigVotes++;
                    else smallVotes++;
                    totalConfidence += result.confidence;
                });
                
                let prediction = bigVotes > smallVotes ? 'BIG' : 'SMALL';
                let confidence = Math.round(totalConfidence / 4);
                
                return { prediction, confidence: Math.min(95, confidence) };
            }
        };

        // Initialize Application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
            initializeCharts();
            startTimer();
            fetchGameData();
            
            // Start auto-refresh
            gameInterval = setInterval(() => {
                if (gameData.settings.autoRefresh) {
                    fetchGameData();
                }
            }, 30000);
        });

        function initializeApp() {
            // Load saved settings
            const saved = localStorage.getItem('madaraSettings');
            if (saved) {
                gameData.settings = { ...gameData.settings, ...JSON.parse(saved) };
            }
            
            // Apply theme
            if (gameData.settings.theme === 'dark') {
                document.documentElement.classList.add('dark');
            }
            
            // Apply settings
            document.getElementById('enableSounds').checked = gameData.settings.soundEnabled;
            document.getElementById('soundVolume').value = gameData.settings.soundVolume;
            document.getElementById('autoRefresh').checked = gameData.settings.autoRefresh;
            document.getElementById('enableNotifications').checked = gameData.settings.notifications;
        }

        function setupEventListeners() {
            // Tab navigation
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => switchTab(btn.dataset.tab));
            });

            // Theme toggle
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            document.getElementById('lightTheme').addEventListener('click', () => setTheme('light'));
            document.getElementById('darkTheme').addEventListener('click', () => setTheme('dark'));

            // Sound controls
            document.getElementById('soundToggle').addEventListener('click', toggleSound);
            document.getElementById('enableSounds').addEventListener('change', (e) => {
                gameData.settings.soundEnabled = e.target.checked;
                saveSettings();
            });
            document.getElementById('soundVolume').addEventListener('input', (e) => {
                gameData.settings.soundVolume = e.target.value;
                saveSettings();
            });
            document.getElementById('testSoundBtn').addEventListener('click', () => playSound('win'));

            // Fullscreen toggle
            document.getElementById('fullscreenToggle').addEventListener('click', toggleFullscreen);

            // Algorithm selection
            document.querySelectorAll('.algorithm-card').forEach(card => {
                card.addEventListener('click', () => selectAlgorithm(card.dataset.algorithm));
            });

            // Refresh button
            document.getElementById('refreshBtn').addEventListener('click', () => {
                fetchGameData();
                generatePrediction();
            });

            // Fetch results button
            document.getElementById('fetchResultsBtn').addEventListener('click', fetchGameData);

            // Settings
            document.getElementById('autoRefresh').addEventListener('change', (e) => {
                gameData.settings.autoRefresh = e.target.checked;
                saveSettings();
            });
            document.getElementById('enableNotifications').addEventListener('change', (e) => {
                gameData.settings.notifications = e.target.checked;
                saveSettings();
            });
            document.getElementById('animationSpeed').addEventListener('change', (e) => {
                gameData.settings.animationSpeed = e.target.value;
                saveSettings();
            });
            document.getElementById('clearDataBtn').addEventListener('click', clearAllData);
        }

        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');

            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('border-blue-500', 'text-blue-600');
                btn.classList.add('border-transparent', 'text-gray-500');
            });

            document.querySelector(`[data-tab="${tabName}"]`).classList.remove('border-transparent', 'text-gray-500');
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('border-blue-500', 'text-blue-600');

            // Update charts if needed
            if (tabName === 'analytics' || tabName === 'results') {
                setTimeout(updateCharts, 100);
            }
        }

        function toggleTheme() {
            const newTheme = gameData.settings.theme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        }

        function setTheme(theme) {
            gameData.settings.theme = theme;
            
            if (theme === 'dark') {
                document.documentElement.classList.add('dark');
                document.getElementById('themeToggle').innerHTML = '<i class="fas fa-sun text-lg"></i>';
            } else {
                document.documentElement.classList.remove('dark');
                document.getElementById('themeToggle').innerHTML = '<i class="fas fa-moon text-lg"></i>';
            }
            
            saveSettings();
        }

        function toggleSound() {
            gameData.settings.soundEnabled = !gameData.settings.soundEnabled;
            document.getElementById('soundToggle').innerHTML = gameData.settings.soundEnabled ? 
                '<i class="fas fa-volume-up text-lg"></i>' : 
                '<i class="fas fa-volume-mute text-lg"></i>';
            saveSettings();
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
                document.getElementById('fullscreenToggle').innerHTML = '<i class="fas fa-compress text-lg"></i>';
            } else {
                document.exitFullscreen();
                document.getElementById('fullscreenToggle').innerHTML = '<i class="fas fa-expand text-lg"></i>';
            }
        }

        function selectAlgorithm(algorithm) {
            gameData.algorithm = algorithm;
            
            // Update visual selection
            document.querySelectorAll('.algorithm-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelector(`[data-algorithm="${algorithm}"]`).classList.add('selected');
            
            // Update display
            const algorithmNames = {
                neural: 'Neural Network',
                pattern: 'Pattern Analysis',
                statistical: 'Statistical Model',
                probability: 'Probability Engine',
                hybrid: 'Hybrid System'
            };
            
            document.getElementById('currentAlgorithm').textContent = algorithmNames[algorithm];
            
            // Generate new prediction
            generatePrediction();
        }

        async function fetchGameData() {
            try {
                const timestamp = Math.floor(Date.now() / 1000);
                const response = await fetch("https://91clubapi.com/api/webapi/GetNoaverageEmerdList", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        pageSize: 10,
                        pageNo: 1,
                        typeId: 30,
                        language: 0,
                        random: "07398f2293d7466d96aeac84b4726d55",
                        signature: "9D2834BE89181B02EAEBEB1D33A659B3",
                        timestamp: timestamp
                    })
                });

                if (!response.ok) throw new Error(`API failed: ${response.status}`);
                
                const data = await response.json();
                
                if (data?.data?.list) {
                    gameData.recentResults = data.data.list.map(item => ({
                        period: item.issueNumber,
                        number: parseInt(item.number),
                        size: parseInt(item.number) >= 5 ? 'BIG' : 'SMALL',
                        color: getNumberColor(parseInt(item.number)),
                        timestamp: new Date().toLocaleTimeString()
                    }));
                    
                    // Check for new results
                    const latestPeriod = gameData.recentResults[0]?.period;
                    if (latestPeriod && latestPeriod !== gameData.currentPeriod) {
                        if (gameData.currentPeriod) {
                            checkPredictionResult(gameData.currentPeriod, gameData.recentResults[0]);
                        }
                        gameData.currentPeriod = latestPeriod;
                        generatePrediction();
                        resetTimer();
                    }
                    
                    updateRecentResultsDisplay();
                }
            } catch (error) {
                console.error("API Error:", error);
                // Generate mock data for demo
                generateMockData();
            }
        }

        function generateMockData() {
            gameData.recentResults = Array.from({length: 10}, (_, i) => {
                const number = Math.floor(Math.random() * 10);
                return {
                    period: (Math.floor(Math.random() * 90000) + 10000).toString(),
                    number: number,
                    size: number >= 5 ? 'BIG' : 'SMALL',
                    color: getNumberColor(number),
                    timestamp: new Date().toLocaleTimeString()
                };
            });
            
            const latestPeriod = gameData.recentResults[0]?.period;
            if (latestPeriod !== gameData.currentPeriod) {
                gameData.currentPeriod = latestPeriod;
                generatePrediction();
                resetTimer();
            }
            
            updateRecentResultsDisplay();
        }

        function getNumberColor(number) {
            if ([1, 3, 7, 9].includes(number)) return 'Green';
            if ([2, 4, 6, 8].includes(number)) return 'Red';
            if ([0, 5].includes(number)) return 'Violet';
            return 'Unknown';
        }

        function generatePrediction() {
            if (!gameData.currentPeriod) return;
            
            // Get historical data for prediction
            const history = gameData.recentResults.map(r => r.number);
            
            // Generate prediction using selected algorithm
            const result = algorithms[gameData.algorithm](history);
            
            // Update next period
            const nextPeriod = (BigInt(gameData.currentPeriod) + 1n).toString();
            const displayPeriod = nextPeriod.slice(-5); // Show last 5 digits
            
            gameData.currentPrediction = {
                period: nextPeriod,
                prediction: result.prediction,
                confidence: result.confidence,
                algorithm: gameData.algorithm,
                timestamp: new Date().toLocaleTimeString()
            };
            
            // Update UI
            document.getElementById('currentPeriod').textContent = displayPeriod;
            document.getElementById('currentPrediction').textContent = result.prediction;
            document.getElementById('confidenceLevel').textContent = result.confidence + '%';
            
            // Update prediction display color
            const predictionDisplay = document.getElementById('predictionDisplay');
            predictionDisplay.className = result.prediction === 'BIG' ? 
                'mx-auto w-32 h-32 rounded-full flex items-center justify-center text-white font-bold text-2xl number-display floating-animation' :
                'mx-auto w-32 h-32 rounded-full flex items-center justify-center text-white font-bold text-2xl bg-gradient-to-r from-blue-500 to-purple-600 floating-animation';
            
            // Add to history
            gameData.history.unshift({
                ...gameData.currentPrediction,
                result: null,
                status: 'pending'
            });
            
            // Limit history
            if (gameData.history.length > 100) {
                gameData.history = gameData.history.slice(0, 100);
            }
            
            updateStatsDisplay();
        }

        function checkPredictionResult(periodToCheck, actualResult) {
            const historyItem = gameData.history.find(h => h.period === periodToCheck);
            if (!historyItem || historyItem.status !== 'pending') return;
            
            const actual = actualResult.size;
            const predicted = historyItem.prediction;
            const isWin = predicted === actual;
            
            // Update history item
            historyItem.result = actual;
            historyItem.status = isWin ? 'win' : 'loss';
            historyItem.actualNumber = actualResult.number;
            
            // Update stats
            gameData.stats.total++;
            if (isWin) {
                gameData.stats.wins++;
                gameData.stats.currentStreak++;
                gameData.stats.maxStreak = Math.max(gameData.stats.maxStreak, gameData.stats.currentStreak);
                
                if (gameData.settings.notifications) {
                    showNotification('🎉 Prediction Correct!', 'success');
                }
                if (gameData.settings.soundEnabled) {
                    playSound('win');
                }
            } else {
                gameData.stats.losses++;
                gameData.stats.currentStreak = 0;
                
                if (gameData.settings.notifications) {
                    showNotification('❌ Prediction Missed', 'error');
                }
                if (gameData.settings.soundEnabled) {
                    playSound('loss');
                }
            }
            
            gameData.stats.winRate = gameData.stats.total > 0 ? 
                Math.round((gameData.stats.wins / gameData.stats.total) * 100) : 0;
            
            updateStatsDisplay();
            updateResultsDisplay();
            updateCharts();
        }

        function updateStatsDisplay() {
            document.getElementById('winRate').textContent = gameData.stats.winRate + '%';
            document.getElementById('winRateBar').style.width = gameData.stats.winRate + '%';
            document.getElementById('currentStreak').textContent = gameData.stats.currentStreak;
            document.getElementById('totalGames').textContent = gameData.stats.total;
            
            // Update win/loss counts
            document.getElementById('totalWins').textContent = gameData.stats.wins;
            document.getElementById('totalLosses').textContent = gameData.stats.losses;
            
            const pendingCount = gameData.history.filter(h => h.status === 'pending').length;
            document.getElementById('totalPending').textContent = pendingCount;
        }

        function updateRecentResultsDisplay() {
            // Update grid
            const grid = document.getElementById('recentResultsGrid');
            grid.innerHTML = gameData.recentResults.map(result => {
                const bgClass = result.size === 'BIG' ? 'gradient-danger' : 'gradient-primary';
                return `
                    <div class="${bgClass} text-white rounded-2xl p-4 text-center shadow-lg">
                        <div class="text-2xl font-bold">${result.number}</div>
                        <div class="text-xs mt-1">${result.size}</div>
                    </div>
                `;
            }).join('');
            
            // Update table
            const table = document.getElementById('recentResultsTable');
            table.innerHTML = gameData.recentResults.map(result => {
                const periodDisplay = result.period.slice(-5); // Show last 5 digits
                return `
                    <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <td class="py-4 px-4 font-medium">${periodDisplay}</td>
                        <td class="py-4 px-4">
                            <span class="inline-flex items-center justify-center w-10 h-10 rounded-full ${result.size === 'BIG' ? 'bg-red-100 text-red-800' : 'bg-blue-100 text-blue-800'} font-bold">
                                ${result.number}
                            </span>
                        </td>
                        <td class="py-4 px-4">
                            <span class="inline-flex px-3 py-1 text-xs font-semibold rounded-full ${result.size === 'BIG' ? 'bg-red-100 text-red-800' : 'bg-blue-100 text-blue-800'}">
                                ${result.size}
                            </span>
                        </td>
                        <td class="py-4 px-4">
                            <span class="inline-flex px-3 py-1 text-xs font-semibold rounded-full ${getColorClass(result.color)}">
                                ${result.color}
                            </span>
                        </td>
                        <td class="py-4 px-4 text-gray-500">${result.timestamp}</td>
                    </tr>
                `;
            }).join('');
        }

        function updateResultsDisplay() {
            const tbody = document.getElementById('resultsTableBody');
            const recent = gameData.history.slice(0, 20);
            
            tbody.innerHTML = recent.map(item => {
                const periodDisplay = item.period.slice(-5); // Show last 5 digits
                let statusBadge = '';
                
                if (item.status === 'win') {
                    statusBadge = '<span class="inline-flex px-3 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">✅ WIN</span>';
                } else if (item.status === 'loss') {
                    statusBadge = '<span class="inline-flex px-3 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">❌ LOSS</span>';
                } else {
                    statusBadge = '<span class="inline-flex px-3 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">⏳ PENDING</span>';
                }
                
                return `
                    <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <td class="py-4 px-4 font-medium">${periodDisplay}</td>
                        <td class="py-4 px-4">
                            <span class="inline-flex px-3 py-1 text-xs font-semibold rounded-full ${item.prediction === 'BIG' ? 'bg-red-100 text-red-800' : 'bg-blue-100 text-blue-800'}">
                                ${item.prediction}
                            </span>
                        </td>
                        <td class="py-4 px-4">
                            ${item.result ? 
                                `<span class="inline-flex px-3 py-1 text-xs font-semibold rounded-full ${item.result === 'BIG' ? 'bg-red-100 text-red-800' : 'bg-blue-100 text-blue-800'}">
                                    ${item.result}
                                </span>` : 
                                '<span class="text-gray-500">-</span>'
                            }
                        </td>
                        <td class="py-4 px-4">${statusBadge}</td>
                        <td class="py-4 px-4 text-gray-500">${item.timestamp}</td>
                    </tr>
                `;
            }).join('');
        }

        function getColorClass(color) {
            switch(color) {
                case 'Green': return 'bg-green-100 text-green-800';
                case 'Red': return 'bg-red-100 text-red-800';
                case 'Violet': return 'bg-purple-100 text-purple-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timer--;
                if (timer <= 0) {
                    timer = 30;
                    fetchGameData();
                }
                updateTimerDisplay();
            }, 1000);
        }

        function resetTimer() {
            timer = 30;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            document.getElementById('timerDisplay').textContent = timer;
            
            // Update circular progress
            const circle = document.getElementById('timerCircle');
            const circumference = 2 * Math.PI * 45;
            const progress = (30 - timer) / 30;
            const offset = circumference * progress;
            circle.style.strokeDashoffset = circumference - offset;
            
            // Change color based on time remaining
            if (timer <= 5) {
                circle.style.stroke = '#ef4444'; // Red
            } else if (timer <= 10) {
                circle.style.stroke = '#f59e0b'; // Yellow
            } else {
                circle.style.stroke = '#3b82f6'; // Blue
            }
        }

        function showNotification(message, type) {
            if (!gameData.settings.notifications) return;
            
            const container = document.getElementById('notificationContainer');
            const notification = document.createElement('div');
            
            const bgColor = type === 'success' ? 'gradient-success' : 'gradient-danger';
            
            notification.className = `notification ${bgColor} text-white p-4 rounded-2xl shadow-2xl max-w-sm`;
            notification.innerHTML = `
                <div class="flex items-center space-x-3">
                    <span class="text-lg">${message.split(' ')[0]}</span>
                    <span class="font-medium flex-1">${message.split(' ').slice(1).join(' ')}</span>
                    <button onclick="this.parentElement.parentElement.remove()" class="ml-auto text-white hover:text-gray-200">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            container.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }

        function playSound(type) {
            if (!gameData.settings.soundEnabled) return;
            
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            const volume = gameData.settings.soundVolume / 100 * 0.3;
            gainNode.gain.setValueAtTime(volume, audioContext.currentTime);
            
            if (type === 'win') {
                // Success melody
                const notes = [523.25, 659.25, 783.99]; // C5, E5, G5
                notes.forEach((freq, i) => {
                    oscillator.frequency.setValueAtTime(freq, audioContext.currentTime + i * 0.1);
                });
            } else {
                // Failure sound
                const notes = [311.13, 293.66, 261.63]; // Eb4, D4, C4
                notes.forEach((freq, i) => {
                    oscillator.frequency.setValueAtTime(freq, audioContext.currentTime + i * 0.15);
                });
            }
            
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
        }

        function initializeCharts() {
            // Performance Chart
            const performanceCtx = document.getElementById('performanceChart').getContext('2d');
            charts.performance = new Chart(performanceCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Win Rate %',
                        data: [],
                        borderColor: 'rgb(34, 197, 94)',
                        backgroundColor: 'rgba(34, 197, 94, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });

            // Accuracy Chart
            const accuracyCtx = document.getElementById('accuracyChart').getContext('2d');
            charts.accuracy = new Chart(accuracyCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Accuracy %',
                        data: [],
                        borderColor: 'rgb(59, 130, 246)',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });

            // Distribution Chart
            const distributionCtx = document.getElementById('distributionChart').getContext('2d');
            charts.distribution = new Chart(distributionCtx, {
                type: 'doughnut',
                data: {
                    labels: ['BIG', 'SMALL'],
                    datasets: [{
                        data: [0, 0],
                        backgroundColor: ['#ef4444', '#3b82f6'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // Algorithm Performance Chart
            const algorithmCtx = document.getElementById('algorithmChart').getContext('2d');
            charts.algorithm = new Chart(algorithmCtx, {
                type: 'bar',
                data: {
                    labels: ['Neural', 'Pattern', 'Statistical', 'Probability', 'Hybrid'],
                    datasets: [{
                        label: 'Win Rate %',
                        data: [0, 0, 0, 0, 0],
                        backgroundColor: [
                            'rgba(147, 51, 234, 0.8)',
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(34, 197, 94, 0.8)',
                            'rgba(239, 68, 68, 0.8)',
                            'rgba(245, 158, 11, 0.8)'
                        ],
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });

            // Streak Chart
            const streakCtx = document.getElementById('streakChart').getContext('2d');
            charts.streak = new Chart(streakCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Win Streak',
                        data: [],
                        borderColor: 'rgb(16, 185, 129)',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function updateCharts() {
            // Update performance chart
            const last10 = gameData.history.slice(0, 10).reverse();
            const performanceData = last10.map((_, index) => {
                const subset = gameData.history.slice(0, index + 1);
                const wins = subset.filter(h => h.status === 'win').length;
                return subset.length > 0 ? Math.round((wins / subset.length) * 100) : 0;
            });
            
            charts.performance.data.labels = performanceData.map((_, i) => `Game ${i + 1}`);
            charts.performance.data.datasets[0].data = performanceData;
            charts.performance.update();

            // Update accuracy chart
            charts.accuracy.data.labels = performanceData.map((_, i) => `Game ${i + 1}`);
            charts.accuracy.data.datasets[0].data = performanceData;
            charts.accuracy.update();

            // Update distribution chart
            const bigCount = gameData.history.filter(h => h.prediction === 'BIG').length;
            const smallCount = gameData.history.filter(h => h.prediction === 'SMALL').length;
            charts.distribution.data.datasets[0].data = [bigCount, smallCount];
            charts.distribution.update();

            // Update streak chart
            const streakData = [];
            let currentStreak = 0;
            gameData.history.slice().reverse().forEach(item => {
                if (item.status === 'win') {
                    currentStreak++;
                } else if (item.status === 'loss') {
                    currentStreak = 0;
                }
                streakData.push(currentStreak);
            });
            
            charts.streak.data.labels = streakData.map((_, i) => `Game ${i + 1}`);
            charts.streak.data.datasets[0].data = streakData;
            charts.streak.update();
        }

        function saveSettings() {
            localStorage.setItem('madaraSettings', JSON.stringify(gameData.settings));
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear all data? This action cannot be undone.')) {
                gameData.history = [];
                gameData.stats = {
                    wins: 0,
                    losses: 0,
                    pending: 0,
                    total: 0,
                    winRate: 0,
                    currentStreak: 0,
                    maxStreak: 0
                };
                
                updateStatsDisplay();
                updateResultsDisplay();
                updateCharts();
                
                showNotification('🗑️ All data cleared successfully', 'success');
            }
        }
    </script>
</body>
</html>
